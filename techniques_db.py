"""
–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–∏–∫ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏
"""

RELAXATION_TECHNIQUES = {
    "–±—ã—Å—Ç—Ä—ã–µ": [
        {
            "id": 1,
            "name": "üßò –î—ã—Ö–∞–Ω–∏–µ 4-7-8",
            "description": "–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —É—Å–ø–æ–∫–æ–µ–Ω–∏—è –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã",
            "duration": "3-5 –º–∏–Ω—É—Ç",
            "category": "–¥—ã—Ö–∞–Ω–∏–µ",
            "difficulty": "–ª–µ–≥–∫–∞—è",
            "steps": [
                "–°—è–¥—å—Ç–µ –∏–ª–∏ –ª—è–≥—Ç–µ –≤ —É–¥–æ–±–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ",
                "–ü–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–¥–æ—Ö–Ω–∏—Ç–µ —á–µ—Ä–µ–∑ —Ä–æ—Ç",
                "–ó–∞–∫—Ä–æ–π—Ç–µ —Ä–æ—Ç –∏ —Ç–∏—Ö–æ –≤–¥–æ—Ö–Ω–∏—Ç–µ —á–µ—Ä–µ–∑ –Ω–æ—Å –Ω–∞ 4 —Å—á–µ—Ç–∞",
                "–ó–∞–¥–µ—Ä–∂–∏—Ç–µ –¥—ã—Ö–∞–Ω–∏–µ –Ω–∞ 7 —Å—á–µ—Ç–æ–≤",
                "–ú–µ–¥–ª–µ–Ω–Ω–æ –≤—ã–¥–æ—Ö–Ω–∏—Ç–µ —á–µ—Ä–µ–∑ —Ä–æ—Ç –Ω–∞ 8 —Å—á–µ—Ç–æ–≤",
                "–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ü–∏–∫–ª 4 —Ä–∞–∑–∞"
            ],
            "best_for": ["—Ç—Ä–µ–≤–æ–≥–∞", "–±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞", "—Å—Ç—Ä–µ—Å—Å"],
            "audio_guide": "https://example.com/audio/4-7-8.mp3"
        },
        {
            "id": 2,
            "name": "üëÅÔ∏è –¢–µ—Ö–Ω–∏–∫–∞ 5-4-3-2-1",
            "description": "–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –ø—Ä–∏ —Ç—Ä–µ–≤–æ–≥–µ –∏–ª–∏ –ø–∞–Ω–∏–∫–µ",
            "duration": "5 –º–∏–Ω—É—Ç",
            "category": "–∑–∞–∑–µ–º–ª–µ–Ω–∏–µ",
            "difficulty": "–ª–µ–≥–∫–∞—è",
            "steps": [
                "–ù–∞–∑–æ–≤–∏—Ç–µ 5 –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥–∏—Ç–µ –≤–æ–∫—Ä—É–≥ —Å–µ–±—è",
                "–ù–∞–π–¥–∏—Ç–µ 4 –≤–µ—â–∏, –∫ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–µ—Ç–µ –ø—Ä–∏–∫–æ—Å–Ω—É—Ç—å—Å—è",
                "–ü—Ä–∏—Å–ª—É—à–∞–π—Ç–µ—Å—å –∫ 3 –∑–≤—É–∫–∞–º –≤–æ–∫—Ä—É–≥",
                "–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ 2 –∑–∞–ø–∞—Ö–∞, –∫–æ—Ç–æ—Ä—ã–µ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ",
                "–í—Å–ø–æ–º–Ω–∏—Ç–µ 1 –≤–∫—É—Å, –∫–æ—Ç–æ—Ä—ã–π –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è"
            ],
            "best_for": ["–ø–∞–Ω–∏—á–µ—Å–∫–∏–µ –∞—Ç–∞–∫–∏", "—Ç—Ä–µ–≤–æ–≥–∞", "–¥–µ—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è"],
            "audio_guide": "https://example.com/audio/5-4-3-2-1.mp3"
        }
    ],
    
    "–º–µ–¥–∏—Ç–∞—Ü–∏–∏": [
        {
            "id": 3,
            "name": "üß† –ú–µ–¥–∏—Ç–∞—Ü–∏—è –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏",
            "description": "–ù–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ –º—ã—Å–ª—è–º–∏ –±–µ–∑ –æ—Ü–µ–Ω–∫–∏",
            "duration": "10-15 –º–∏–Ω—É—Ç",
            "category": "–º–µ–¥–∏—Ç–∞—Ü–∏—è",
            "difficulty": "—Å—Ä–µ–¥–Ω—è—è",
            "steps": [
                "–°—è–¥—å—Ç–µ —Å –ø—Ä—è–º–æ–π —Å–ø–∏–Ω–æ–π –≤ —É–¥–æ–±–Ω–æ–π –ø–æ–∑–µ",
                "–ó–∞–∫—Ä–æ–π—Ç–µ –≥–ª–∞–∑–∞ –∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ –¥—ã—Ö–∞–Ω–∏–∏",
                "–ö–æ–≥–¥–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –º—ã—Å–ª–∏, –ø—Ä–æ—Å—Ç–æ –æ—Ç–º–µ—á–∞–π—Ç–µ –∏—Ö",
                "–ù–µ –æ—Ü–µ–Ω–∏–≤–∞–π—Ç–µ –º—ã—Å–ª–∏, –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–ª—é–¥–∞–π—Ç–µ",
                "–ú—è–≥–∫–æ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –¥—ã—Ö–∞–Ω–∏—é"
            ],
            "best_for": ["—Ç—Ä–µ–≤–æ–≥–∞", "—Å—Ç—Ä–µ—Å—Å", "–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è"],
            "audio_guide": "https://example.com/audio/mindfulness.mp3"
        },
        {
            "id": 4,
            "name": "üí§ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–∞",
            "description": "–ü–æ—ç—Ç–∞–ø–Ω–æ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞",
            "duration": "15-20 –º–∏–Ω—É—Ç",
            "category": "—Ç–µ–ª–µ—Å–Ω–∞—è",
            "difficulty": "–ª–µ–≥–∫–∞—è",
            "steps": [
                "–õ—è–≥—Ç–µ –Ω–∞ —Å–ø–∏–Ω—É –≤ —É–¥–æ–±–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏",
                "–ù–∞—á–Ω–∏—Ç–µ —Å –ø–∞–ª—å—Ü–µ–≤ –Ω–æ–≥, –ø–æ—á—É–≤—Å—Ç–≤—É–π—Ç–µ –∏—Ö",
                "–ú–µ–¥–ª–µ–Ω–Ω–æ –¥–≤–∏–≥–∞–π—Ç–µ—Å—å –≤–≤–µ—Ä—Ö: —Å—Ç–æ–ø—ã, –ª–æ–¥—ã–∂–∫–∏, –∏–∫—Ä—ã",
                "–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —á–µ—Ä–µ–∑ –∫–æ–ª–µ–Ω–∏, –±–µ–¥—Ä–∞, –∂–∏–≤–æ—Ç",
                "–ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ —Ä—É–∫–∞–º, –ø–ª–µ—á–∞–º, —à–µ–µ, –ª–∏—Ü—É",
                "–í –∫–æ–Ω—Ü–µ –ø—Ä–æ—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ç–µ–ª–æ —Ü–µ–ª–∏–∫–æ–º"
            ],
            "best_for": ["–±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞", "–Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ", "—Ç—Ä–µ–≤–æ–≥–∞"],
            "audio_guide": "https://example.com/audio/body-scan.mp3"
        }
    ],
    
    "–¥–ª—è_—Å–Ω–∞": [
        {
            "id": 5,
            "name": "üåô –¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –∑–∞—Å—ã–ø–∞–Ω–∏—è",
            "description": "–†–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ç–µ–ª–∞ –ø–µ—Ä–µ–¥ —Å–Ω–æ–º",
            "duration": "10 –º–∏–Ω—É—Ç",
            "category": "—Å–æ–Ω",
            "difficulty": "–ª–µ–≥–∫–∞—è",
            "steps": [
                "–õ—è–≥—Ç–µ –≤ –∫—Ä–æ–≤–∞—Ç—å –≤ —É–¥–æ–±–Ω–æ–π –ø–æ–∑–µ",
                "–ù–∞—á–Ω–∏—Ç–µ —Å —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è –ø–∞–ª—å—Ü–µ–≤ –Ω–æ–≥",
                "–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–≤–∏–≥–∞–π—Ç–µ—Å—å –≤–≤–µ—Ä—Ö: —Å—Ç–æ–ø—ã, –ª–æ–¥—ã–∂–∫–∏, –∏–∫—Ä—ã",
                "–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–π—Ç–µ, –∫–∞–∫ –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å —Ç–µ–ª–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç—è–∂–µ–ª–æ–π",
                "–î—ã—à–∏—Ç–µ –º–µ–¥–ª–µ–Ω–Ω–æ –∏ –≥–ª—É–±–æ–∫–æ",
                "–ï—Å–ª–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –º—ã—Å–ª–∏, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–π—Ç–µ, –∫–∞–∫ –æ–Ω–∏ —É–ø–ª—ã–≤–∞—é—Ç"
            ],
            "best_for": ["–±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞", "—Ç—Ä–µ–≤–æ–≥–∞", "–ø–µ—Ä–µ–≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µ"],
            "audio_guide": "https://example.com/audio/sleep.mp3"
        }
    ],
    
    "–ø—Ä–∏_—Ç—Ä–µ–≤–æ–≥–µ": [
        {
            "id": 6,
            "name": "üîÑ –î—ã—Ö–∞–Ω–∏–µ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π",
            "description": "–°–æ—á–µ—Ç–∞–Ω–∏–µ –¥—ã—Ö–∞–Ω–∏—è —Å —É—Å–ø–æ–∫–∞–∏–≤–∞—é—â–∏–º–∏ –æ–±—Ä–∞–∑–∞–º–∏",
            "duration": "7 –º–∏–Ω—É—Ç",
            "category": "–¥—ã—Ö–∞–Ω–∏–µ",
            "difficulty": "–ª–µ–≥–∫–∞—è",
            "steps": [
                "–ó–∞–∫—Ä–æ–π—Ç–µ –≥–ª–∞–∑–∞ –∏ —Å–¥–µ–ª–∞–π—Ç–µ –≥–ª—É–±–æ–∫–∏–π –≤–¥–æ—Ö",
                "–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–ø–æ–∫–æ–π–Ω–æ–µ –º–µ—Å—Ç–æ (–ø–ª—è–∂, –ª–µ—Å, –≥–æ—Ä—ã)",
                "–ù–∞ –≤—ã–¥–æ—Ö–µ –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫ —Ç—Ä–µ–≤–æ–≥–∞ –ø–æ–∫–∏–¥–∞–µ—Ç –≤–∞—Å",
                "–ü–æ–≤—Ç–æ—Ä—è–π—Ç–µ —Å –∫–∞–∂–¥—ã–º –≤–¥–æ—Ö–æ–º –∏ –≤—ã–¥–æ—Ö–æ–º",
                "–°–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –¥–µ—Ç–∞–ª—è—Ö —Å–≤–æ–µ–≥–æ —Å–ø–æ–∫–æ–π–Ω–æ–≥–æ –º–µ—Å—Ç–∞"
            ],
            "best_for": ["—Ç—Ä–µ–≤–æ–≥–∞", "–ø–∞–Ω–∏–∫–∞", "—Å—Ç—Ä–µ—Å—Å"],
            "audio_guide": "https://example.com/audio/visualization.mp3"
        }
    ],
    
    "–ø—Ä–∏_–≥–Ω–µ–≤–µ": [
        {
            "id": 7,
            "name": "‚ùÑÔ∏è –¢–µ—Ö–Ω–∏–∫–∞ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è",
            "description": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–Ω–µ–≤–æ–º —á–µ—Ä–µ–∑ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –æ—â—É—â–µ–Ω–∏—è",
            "duration": "5 –º–∏–Ω—É—Ç",
            "category": "—Ç–µ–ª–µ—Å–Ω–∞—è",
            "difficulty": "–ª–µ–≥–∫–∞—è",
            "steps": [
                "–ï—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ, –≤—ã–π–¥–∏—Ç–µ –Ω–∞ —Å–≤–µ–∂–∏–π –≤–æ–∑–¥—É—Ö",
                "–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ –ø—Ä–æ—Ö–ª–∞–¥–µ –Ω–∞ —Å–≤–æ–µ–π –∫–æ–∂–µ",
                "–°–¥–µ–ª–∞–π—Ç–µ –≥–ª—É–±–æ–∫–∏–π –≤–¥–æ—Ö –ø—Ä–æ—Ö–ª–∞–¥–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞",
                "–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫ –≥–Ω–µ–≤ –æ—Å—Ç—ã–≤–∞–µ—Ç —Å –∫–∞–∂–¥—ã–º –≤—ã–¥–æ—Ö–æ–º",
                "–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ 10 —Ä–∞–∑"
            ],
            "best_for": ["–≥–Ω–µ–≤", "—Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ", "—Ñ—Ä—É—Å—Ç—Ä–∞—Ü–∏—è"],
            "audio_guide": "https://example.com/audio/cooling.mp3"
        }
    ]
}

# –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ—Ö–Ω–∏–∫–∞–º–∏
def get_technique_by_id(tech_id: int):
    """–ù–∞–π—Ç–∏ —Ç–µ—Ö–Ω–∏–∫—É –ø–æ ID"""
    for category in RELAXATION_TECHNIQUES.values():
        for tech in category:
            if tech["id"] == tech_id:
                return tech
    return None

def get_techniques_by_category(category: str):
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–µ—Ö–Ω–∏–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
    return RELAXATION_TECHNIQUES.get(category, [])

def get_random_technique(category: str = None):
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é —Ç–µ—Ö–Ω–∏–∫—É"""
    if category and category in RELAXATION_TECHNIQUES:
        return random.choice(RELAXATION_TECHNIQUES[category])
    
    all_tech = []
    for tech_list in RELAXATION_TECHNIQUES.values():
        all_tech.extend(tech_list)
    return random.choice(all_tech)

def search_techniques(keyword: str):
    """–ü–æ–∏—Å–∫ —Ç–µ—Ö–Ω–∏–∫ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É"""
    results = []
    for category in RELAXATION_TECHNIQUES.values():
        for tech in category:
            if (keyword.lower() in tech["name"].lower() or 
                keyword.lower() in tech["description"].lower() or
                keyword.lower() in " ".join(tech["best_for"]).lower()):
                results.append(tech)
    return results

def get_categories():
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
    return list(RELAXATION_TECHNIQUES.keys())
